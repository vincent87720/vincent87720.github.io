---
import MainLayout from "@/layouts/MainLayout.astro";
import MainHeader from "@/components/MainHeader.astro";
import MainBody from "@/components/MainBody.astro";
import { siteConfig } from "@/config";

export async function getStaticPaths({ paginate }) {
  const allPosts = await Astro.glob("/src/posts/**/*.md");
  const orderByCreateDateTimeDescPosts = allPosts
    .sort(
      (a, b) =>
        new Date(a.frontmatter.createAt).valueOf() -
        new Date(b.frontmatter.createAt).valueOf()
    )
    .reverse();
  return paginate(orderByCreateDateTimeDescPosts, { pageSize: 8 });
}
const { page } = Astro.props;
---

<MainLayout title="">
  <MainHeader title={siteConfig.title} description={siteConfig.description} />
  <MainBody
    posts={page.data}
    currentPage={page.currentPage}
    lastPage={page.lastPage}
    firstPageURL="/"
    prevUrl={page.url.prev}
    nextUrl={page.url.next}
    extraPagination={true}
  />
</MainLayout>
