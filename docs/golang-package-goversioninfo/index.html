<!DOCTYPE html><html lang="zh-Hant"> <head><meta charset="UTF-8"><meta name="description" content="柴魚筆記"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.10.3"><title>柴魚筆記</title><link rel="stylesheet" href="/assets/style.HZtN7SYH.css"></head> <body>  <div class="nav-outer" data-astro-cid-pux6a34n> <nav class="nav-inner" data-astro-cid-pux6a34n> <span class="logo" data-astro-cid-pux6a34n> <a href="/" data-astro-cid-pux6a34n> <img src="/favicon.svg" data-astro-cid-pux6a34n> </a> </span> <ul data-astro-cid-pux6a34n> <li data-astro-cid-pux6a34n> <a href="/" data-astro-cid-pux6a34n> <span data-astro-cid-pux6a34n>Home</span> </a> </li><li data-astro-cid-pux6a34n> <a href="/author/Katsuobushi" data-astro-cid-pux6a34n> <span data-astro-cid-pux6a34n>Author</span> </a> </li><li data-astro-cid-pux6a34n> <a href="/tags" data-astro-cid-pux6a34n> <span data-astro-cid-pux6a34n>Tags</span> </a> </li> </ul> </nav> </div>   <header class="main-header has-cover" data-astro-cid-yl355ysp> <div class="content" data-astro-cid-yl355ysp> <div class="header-box" data-astro-cid-yl355ysp>  <div class="post-info" data-astro-cid-qwcrhz7j> <div class="post-type" data-astro-cid-qwcrhz7j> <span data-astro-cid-qwcrhz7j>Article</span>  <span class="post-type-dash" data-astro-cid-qwcrhz7j>－</span> <span data-astro-cid-qwcrhz7j>Golang</span>  </div> <h1 class="post-title" data-astro-cid-qwcrhz7j>指定golang執行檔檔案屬性</h1> <div class="post-metadata" data-astro-cid-qwcrhz7j> <span class="author-avatar" data-astro-cid-qwcrhz7j> <img src="/favicon.svg" data-astro-cid-qwcrhz7j> </span> <div class="metadata-right" data-astro-cid-qwcrhz7j> <h4 class="metadata-author" data-astro-cid-qwcrhz7j>Katsuobushi</h4> <span class="metadata-datetime" data-astro-cid-qwcrhz7j>2020-05-22T00:00:00+08:00</span> </div> </div> </div>   </div> <div class="main-cover" data-astro-cid-yl355ysp> <img src="/assets/Gopher.DCDg76Jn_1yae0N.webp" alt="" data-astro-cid-yl355ysp width="4000" height="1030" loading="lazy" decoding="async"> </div> </div> </header>  <article> <div class="content"> <div class="markdown">  <p>GoVersionInfo package可在生成執行檔時指定執行檔縮圖及檔案屬性，檔案描述、檔案類型、版本等參數皆可指定</p>
<h2 id="安裝">安裝</h2>
<h3 id="使用指令安裝package">使用指令安裝package</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">go</span><span style="color:#E1E4E8"> get github.com</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">josephspurrier</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">goversioninfo</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">cmd</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">goversioninfo</span></span>
<span class="line"></span></code></pre>
<h3 id="產生可執行檔">產生可執行檔</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">go</span><span style="color:#E1E4E8"> build </span><span style="color:#F97583">-</span><span style="color:#E1E4E8">o bin</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">goversioninfo.exe github.com</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">josephspurrier</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">goversioninfo</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">cmd</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">goversioninfo</span></span>
<span class="line"></span></code></pre>
<p><code>-o bin/goversioninfo.exe</code>代表要將產生出來的可執行檔放在bin目錄裡，並將檔名命名為goversioninfo.exe</p>
<p>空一格後面接<code>github.com/josephspurrier/goversioninfo/cmd/goversioninfo</code>代表要以這個package為目標產生可執行檔</p>
<h2 id="設定">設定</h2>
<h3 id="設定go-generate註釋">設定go generate註釋</h3>
<p>將<code>//go:generate goversioninfo</code>加入到程式碼的最頂端，往後在執行<code>go generate</code>命令時才能夠被搜尋到</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#6A737D">//go:generate goversioninfo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">package</span><span style="color:#B392F0"> main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#9ECBFF"> "</span><span style="color:#B392F0">fmt</span><span style="color:#9ECBFF">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#B392F0"> main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">    fmt.</span><span style="color:#B392F0">Println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Hello world"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h3 id="設定versioninfojson檔案">設定versioninfo.json檔案</h3>
<p>在<code>github.com\josephspurrier\goversioninfo\testdata\resource</code>內有一個檔名為versioninfo的json檔，將其複製並放置於要產生執行檔的程式碼的目錄中</p>
<p>resource資料夾內有icon和goversioninfo.exe.manifest兩個檔案，等等在設定versioninfo時會用到</p>
<p><img  src="/assets/10.C58oBLb0_1VrBYK.webp" alt="10" width="1082" height="659" loading="lazy" decoding="async"></p>
<h3 id="指定versioninfojson檔案參數">指定versioninfo.json檔案參數</h3>
<p>將IconPath和ManifestPath的路徑指定為可執行檔圖示的路徑和Manifest檔案的路徑</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="json"><code><span class="line"><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#79B8FF">    "FixedFileInfo"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">        "FileVersion"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">            "Major"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">            "Minor"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">            "Patch"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">            "Build"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#79B8FF">        "ProductVersion"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">            "Major"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">            "Minor"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">            "Patch"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">            "Build"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#79B8FF">        "FileFlagsMask"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"3f"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "FileFlags "</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"00"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "FileOS"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"040004"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "FileType"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"01"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "FileSubType"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"00"</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#79B8FF">    "StringFileInfo"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">        "Comments"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Test file."</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "CompanyName"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"josephspurrier"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "FileDescription"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"This is a hello world file."</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "FileVersion"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"v1.0.0.0"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "InternalName"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"goversioninfo.exe"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "LegalCopyright"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Copyright (c) 2019 Joseph Spurrier"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "LegalTrademarks"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">""</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "OriginalFilename"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"main.go"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "PrivateBuild"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">""</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "ProductName"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"goversioninfo"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "ProductVersion"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"v1.0.0.0"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">        "SpecialBuild"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">""</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#79B8FF">    "VarFileInfo"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">        "Translation"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">            "LangID"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"0409"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">            "CharsetID"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"04B0"</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#79B8FF">    "IconPath"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"resource/icon.ico"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">    "ManifestPath"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"resource/goversioninfo.exe.manifest"</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h3 id="產生syso檔">產生syso檔</h3>
<p>輸入go generate指令產生resource.syso檔案，若不在同個目錄內可指定package路徑，例如主程式在D:\Project\Go\src\goinfotest，若當前位置在目錄內直接下go generate即可，若不在目錄內則要輸入go generate+從src目錄後開始算的package路徑(go generate goinfotest)產生syso檔</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">go</span><span style="color:#E1E4E8"> generate</span></span>
<span class="line"><span style="color:#F97583">go</span><span style="color:#E1E4E8"> generate your\package\route</span></span>
<span class="line"></span></code></pre>
<p><img  src="/assets/20.0NuYSe0L_ZF7rUB.webp" alt="20" width="1082" height="659" loading="lazy" decoding="async"></p>
<h3 id="產生可執行檔-1">產生可執行檔</h3>
<p>使用go build產生可執行檔，亦可使用”go build -o 目的路徑與檔名 +package路徑”產生可執行檔</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#F97583">go</span><span style="color:#E1E4E8"> build</span></span>
<span class="line"><span style="color:#F97583">go</span><span style="color:#E1E4E8"> build </span><span style="color:#F97583">-</span><span style="color:#E1E4E8">o output\route your\package\route</span></span>
<span class="line"></span></code></pre>
<p><img  src="/assets/30.CU6y0Lgi_1WmSkp.webp" alt="30" width="1082" height="659" loading="lazy" decoding="async"></p>  </div>  <div class="post-footer" data-astro-cid-ctzdi7mj> <div class="post-tags" data-astro-cid-ctzdi7mj> <span class="post-tags-label" data-astro-cid-ctzdi7mj>Topic</span> <div class="post-tags-list" data-astro-cid-ctzdi7mj> <a class="post-tag-badge" href="/tag/Golang" data-astro-cid-ctzdi7mj> Golang </a> </div> </div> <div class="post-nav" data-astro-cid-ctzdi7mj> <div class="post-nav-half" data-astro-cid-ctzdi7mj> <a class="post-nav-prev" href="qt-key-mouse-press-event" data-astro-cid-ctzdi7mj> <span class="post-nav-icon-left" data-astro-cid-ctzdi7mj></span> <h2 class="post-nav-title" data-astro-cid-ctzdi7mj>Qt的鍵盤與滑鼠點擊事件</h2> <p class="post-nav-abstract" data-astro-cid-ctzdi7mj>Qt的鍵盤與滑鼠點擊事件</p> <p class="post-nav-metadata" data-astro-cid-ctzdi7mj> 2020-06-12T00:00:00+08:00 </p> </a> </div> <div class="post-nav-half" data-astro-cid-ctzdi7mj> <a class="post-nav-next" href="cpp-array-pointer-address" data-astro-cid-ctzdi7mj> <span class="post-nav-icon-right" data-astro-cid-ctzdi7mj></span> <h2 class="post-nav-title" data-astro-cid-ctzdi7mj>陣列與指標的位址</h2> <p class="post-nav-abstract" data-astro-cid-ctzdi7mj>首先宣告名稱為arr大小為10的int陣列，接著分別輸出arr、&amp;arr[0]和&amp;arr</p> <p class="post-nav-metadata" data-astro-cid-ctzdi7mj> 2020-03-18T00:00:00+08:00 </p> </a> </div> </div> <div class="post-comments" data-astro-cid-ctzdi7mj> <script src="https://utteranc.es/client.js" repo="vincent87720/BlogComments" issue-term="pathname" theme="github-dark" crossorigin="anonymous" async></script> </div> </div>  </div> </article>  <div class="nav-outer" data-astro-cid-bpgok6sl> <nav class="nav-inner" data-astro-cid-bpgok6sl> <span data-astro-cid-bpgok6sl>柴魚筆記 © 2019-2024</span> <div class="nav-external-link" data-astro-cid-bpgok6sl> <a href="https://github.com/vincent87720" data-astro-cid-bpgok6sl>Github</a><a href="https://www.linkedin.com/in/vincent87720" data-astro-cid-bpgok6sl>LinkedIn</a> </div> <div class="nav-item-grow" data-astro-cid-bpgok6sl></div> <span class="nav-pubinfo" data-astro-cid-bpgok6sl>
Published with
<a href="https://astro.build" target="_blank" data-astro-cid-bpgok6sl>Astro</a>
• Theme modified from
<a href="https://github.com/zutrinken/attila" target="_blank" data-astro-cid-bpgok6sl>Attila</a>
• Technical support by
<a href="https://millieattic-millieqius-projects.vercel.app" target="_blank" data-astro-cid-bpgok6sl>Millie</a> </span> </nav> </div>   </body></html>