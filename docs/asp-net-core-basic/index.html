<!DOCTYPE html><html lang="zh-Hant"> <head><meta charset="UTF-8"><meta name="description" content="ASP.NET Core 可以建立Web及桌面應用程式，本篇筆記記錄 ASP.NET Core 建立 Web 應用程式時的基礎概念。"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="sitemap" href="/sitemap-index.xml"><meta name="generator" content="Astro v4.2.1"><title>ASP.NET Core 基礎 - 柴魚筆記</title><meta name="google-site-verification" content="2IBowwEd6BLzhCDp1tolkz_388wjn2Vtwr9FedCaH_g"><link rel="preload" href="/assets/VisualStudioGray.TS9KzOt__Z20LzVa.webp" as="image"><link rel="stylesheet" href="/assets/style.oUFxCPxu.css" /><script type="module" src="/assets/hoisted.fwYYp2uV.js"></script><style>[data-astro-transition-scope="astro-mljbisf2-1"] { view-transition-name: astro-mljbisf2-1; }@layer astro { ::view-transition-old(astro-mljbisf2-1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(astro-mljbisf2-1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(astro-mljbisf2-1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(astro-mljbisf2-1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-mljbisf2-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-mljbisf2-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-mljbisf2-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-mljbisf2-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-mljbisf2-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-mljbisf2-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-mljbisf2-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-mljbisf2-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body data-astro-transition-scope="astro-mljbisf2-1">   <custom-astro-element data-astro-cid-pux6a34n> <div id="navOuter" class="nav-outer" data-astro-cid-pux6a34n> <nav class="nav-inner" data-astro-cid-pux6a34n> <span class="logo" data-astro-cid-pux6a34n> <a href="/" data-astro-cid-pux6a34n> <img src="/favicon.svg" data-astro-cid-pux6a34n> </a> </span> <ul data-astro-cid-pux6a34n> <li data-astro-cid-pux6a34n> <a href="/" data-astro-cid-pux6a34n> <span data-astro-cid-pux6a34n>Home</span> </a> </li><li data-astro-cid-pux6a34n> <a href="/author/Katsuobushi" data-astro-cid-pux6a34n> <span data-astro-cid-pux6a34n>Author</span> </a> </li><li data-astro-cid-pux6a34n> <a href="/tags" data-astro-cid-pux6a34n> <span data-astro-cid-pux6a34n>Tags</span> </a> </li> </ul> </nav> <div class="nav-control" data-astro-cid-pux6a34n> <a id="MenuBtn" class="nav-control-inner" data-astro-cid-pux6a34n> <span class="icon icon-menu" data-astro-cid-pux6a34n>Menu</span> </a> </div> </div> <div id="navOverlay" data-astro-cid-pux6a34n></div> </custom-astro-element>     <progress-bar-element data-astro-cid-dkeyiay5> <div id="progress-container" class="progress-container" data-astro-cid-dkeyiay5> <span id="progress-bar" class="progress-bar" data-astro-cid-dkeyiay5></span> </div> </progress-bar-element> <header class="main-header has-cover" data-astro-cid-yl355ysp> <div class="content" data-astro-cid-yl355ysp> <div class="header-box" data-astro-cid-yl355ysp>  <div class="post-info" data-astro-cid-qwcrhz7j> <div class="post-type" data-astro-cid-qwcrhz7j> <span data-astro-cid-qwcrhz7j>Article</span>  <span class="post-type-dash" data-astro-cid-qwcrhz7j>－</span> <span data-astro-cid-qwcrhz7j>ASP.NET Core</span>  </div> <h1 class="post-title" data-astro-cid-qwcrhz7j>ASP.NET Core 基礎</h1> <div class="post-metadata" data-astro-cid-qwcrhz7j> <span class="author-avatar" data-astro-cid-qwcrhz7j> <img src="/favicon.svg" data-astro-cid-qwcrhz7j> </span> <div class="metadata-right" data-astro-cid-qwcrhz7j> <h4 class="metadata-author" data-astro-cid-qwcrhz7j>Katsuobushi</h4> <span class="metadata-datetime" data-astro-cid-qwcrhz7j> 2024-07-31T01:52:00+08:00 </span> </div> </div> </div>   </div> <div class="main-cover" data-astro-cid-yl355ysp> <img src="/assets/VisualStudioGray.TS9KzOt__Z20LzVa.webp" alt="" data-astro-cid-yl355ysp width="3840" height="2160" loading="lazy" decoding="async"> </div> </div> </header>  <article data-astro-cid-dkeyiay5> <div class="content" data-astro-cid-dkeyiay5> <div class="markdown">  <p>ASP.NET Core 可以建立Web及桌面應用程式，本篇筆記記錄 ASP.NET Core 建立 Web 應用程式時的基礎概念。</p>
<h2 id="建立專案">建立專案</h2>
<p>使用<code>dotnet new web</code>指令由範本建立專案後，可以觀察到資料夾內多了一些檔案和目錄。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span>Foo</span></span>
<span class="line"><span>|--appsettings.json //用於設定連線字串、key或可能會變動的資訊</span></span>
<span class="line"><span>|--bin //存放編譯過後的程式碼和DLL檔案</span></span>
<span class="line"><span>|--Foo.csproj //C#專案的專案設定檔</span></span>
<span class="line"><span>|--Program.cs //主程式（程式進入點）</span></span>
<span class="line"><span>|--Properties</span></span>
<span class="line"><span>	|--launchSettings.json //程式的啟動設定</span></span>
<span class="line"><span></span></span></code></pre>
<h2 id="進入點">進入點</h2>
<p>其中程式進入點是一個名為<code>Program.cs</code>的檔案，檔案內預設會包含以下程式碼：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">namespace</span><span style="color:#B392F0"> Foo</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> Program</span></span>
<span class="line"><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> static</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> Main</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">string</span><span style="color:#E1E4E8">[] </span><span style="color:#B392F0">args</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    {</span></span>
<span class="line"><span style="color:#6A737D">	    // 回傳一個類別為WebApplicationBuilder的物件，名稱為builder</span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#B392F0"> builder</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> WebApplication.</span><span style="color:#B392F0">CreateBuilder</span><span style="color:#E1E4E8">(args);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">		// 建置WebApplication，回傳WebApplication的物件</span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#B392F0"> app</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> builder.</span><span style="color:#B392F0">Build</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">        app.</span><span style="color:#B392F0">MapGet</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/"</span><span style="color:#E1E4E8">, () </span><span style="color:#F97583">=></span><span style="color:#9ECBFF"> "Hello World!"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">		// 執行應用程式</span></span>
<span class="line"><span style="color:#E1E4E8">        app.</span><span style="color:#B392F0">Run</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>使用<code>WebApplication.CreateBuilder</code>可以建立一個WebApplicationBuilder的物件，該物件包含許多屬性，例如用於管理服務的Services、用於記錄的Logging或是與設定相關的Configuration等，可以在需要時取用這些屬性。</p>
<p>builder物件的<code>Build()</code>方法會建置並回傳WebApplication物件，該物件可以設定路由或請求的pipeline。ASP.NET Core 提供許多現成的Middleware可以使用，例如常見的<code>UseAuthentication()</code>、<code>MapControllers()</code>或<code>UseRouting()</code>等，使用<code>Use()</code>方法也可以加入自定義的Middleware。除了設定Middleware與路由外，在程式的最後執行<code>Run()</code>或其他相關的方法可以啟動應用程式。</p>
<h2 id="啟動設定">啟動設定</h2>
<p><code>launchSettings.json</code>是用來決定執行應用程式時所要套用的環境設定，使用範本建立的ASP.NET Core專案預設包含以下設定：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#79B8FF">  "$schema"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"http://json.schemastore.org/launchsettings.json"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">  "iisSettings"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">    "windowsAuthentication"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">    "anonymousAuthentication"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">    "iisExpress"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">      "applicationUrl"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"http://localhost:42581"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "sslPort"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">44374</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#79B8FF">  "profiles"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">    "http"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">      "commandName"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Project"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "dotnetRunMessages"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "launchBrowser"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "applicationUrl"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"http://localhost:5159"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "environmentVariables"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">        "ASPNETCORE_ENVIRONMENT"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Development"</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#79B8FF">    "https"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">      "commandName"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Project"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "dotnetRunMessages"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "launchBrowser"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "applicationUrl"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"https://localhost:7084;http://localhost:5159"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "environmentVariables"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">        "ASPNETCORE_ENVIRONMENT"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Development"</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#79B8FF">    "IIS Express"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">      "commandName"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"IISExpress"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "launchBrowser"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "environmentVariables"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">        "ASPNETCORE_ENVIRONMENT"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Development"</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>檔案中的profiles區塊包含http、https及IIS Express三個設定，其中.NET CLI只支援commandName為Project的設定，其餘commandName設定為IIS Express、IIS或Executable皆無法以.NET CLI指定其作為啟動設定。</p>
<h2 id="專案設定檔">專案設定檔</h2>
<p>目錄中的.csproj檔案是C#專案的專案設定檔，檔案內包含MSBuild建置專案時所需的資訊，例如程式建置時所需包含的檔案、程式版本、引用到的函式庫或專案等，可視需求加入所需的設定。</p>
<h6 id="參考資料">參考資料</h6>
<ul>
<li><a href="https://learn.microsoft.com/zh-tw/dotnet/api/microsoft.aspnetcore.builder.webapplicationbuilder?view=aspnetcore-8.0">WebApplicationBuilder 類別</a></li>
<li><a href="https://learn.microsoft.com/zh-tw/dotnet/api/microsoft.aspnetcore.builder.webapplication?view=aspnetcore-8.0">WebApplication 類別</a></li>
<li><a href="https://blog.poychang.net/visual-studio-launch-settings-iis-express-iis-project-executable/">launchSettings.json 的 commandName 是做什麼用的？</a></li>
<li><a href="https://blog.miniasp.com/post/2023/03/03/Understanding-ASP-NET-Core-7-Launch-Profile">認識 ASP.NET Core 7.0 的啟動設定檔 (Launch Profile)</a></li>
<li><a href="https://learn.microsoft.com/zh-tw/aspnet/web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-project-file">瞭解專案檔</a></li>
</ul>  </div>  <div class="post-footer" data-astro-cid-ctzdi7mj> <div class="post-tags" data-astro-cid-ctzdi7mj> <span class="post-tags-label" data-astro-cid-ctzdi7mj>Topic</span> <div class="post-tags-list" data-astro-cid-ctzdi7mj> <a class="post-tag-badge" href="/tag/asp-net-core" data-astro-cid-ctzdi7mj> ASP.NET Core </a><a class="post-tag-badge" href="/tag/csharp" data-astro-cid-ctzdi7mj> C# </a> </div> </div> <div class="post-nav" data-astro-cid-ctzdi7mj> <div class="post-nav-half" data-astro-cid-ctzdi7mj> <a class="post-nav-prev" href="/middleware-in-asp-net-core" data-astro-cid-ctzdi7mj> <span class="post-nav-icon-left" data-astro-cid-ctzdi7mj></span> <h2 class="post-nav-title" data-astro-cid-ctzdi7mj>Middleware in ASP.NET Core</h2> <p class="post-nav-abstract" data-astro-cid-ctzdi7mj>ASP.NET Core中，請求與回應會經過一連串的Middleware（中介軟體），每個Middleware都有各自的職責，例如用於驗證、授權或是錯誤處理等。當請求或回應流經Middleware時，Middleware會處理並選擇是否將請求傳遞到下一個Middleware，或者是將其短路。</p> <p class="post-nav-metadata" data-astro-cid-ctzdi7mj> 2024-08-03T19:25:00+08:00 </p> </a> </div> <div class="post-nav-half" data-astro-cid-ctzdi7mj> <a class="post-nav-next" href="/csharp-base" data-astro-cid-ctzdi7mj> <span class="post-nav-icon-right" data-astro-cid-ctzdi7mj></span> <h2 class="post-nav-title" data-astro-cid-ctzdi7mj>base 關鍵字</h2> <p class="post-nav-abstract" data-astro-cid-ctzdi7mj>base 關鍵字用於存取基底類別的成員，base包含「取用基底類別的函式」和「呼叫基底類別的建構式」兩種使用時機。</p> <p class="post-nav-metadata" data-astro-cid-ctzdi7mj> 2024-07-29T13:39:00+08:00 </p> </a> </div> </div> <div class="post-comments" data-astro-cid-ctzdi7mj> <script src="https://utteranc.es/client.js" repo="vincent87720/BlogComments" issue-term="pathname" theme="github-dark" crossorigin="anonymous" async></script> </div> </div>  </div> </article>  <div class="nav-outer" data-astro-cid-bpgok6sl> <nav class="nav-inner" data-astro-cid-bpgok6sl> <div class="nav-inner-left" data-astro-cid-bpgok6sl> <span class="nav-copyright nav-margin" data-astro-cid-bpgok6sl> 柴魚筆記 © 2019-2024 </span> <div class="nav-external-link nav-margin" data-astro-cid-bpgok6sl> <a href="https://github.com/vincent87720" data-astro-cid-bpgok6sl>Github</a><a href="https://www.linkedin.com/in/vincent87720" data-astro-cid-bpgok6sl>LinkedIn</a> </div> </div> <span class="nav-pubinfo" data-astro-cid-bpgok6sl> <div class="nav-mb-sm" data-astro-cid-bpgok6sl>
Published with
<a href="https://astro.build" target="_blank" data-astro-cid-bpgok6sl>Astro</a> </div> <div class="dot" data-astro-cid-bpgok6sl>・</div> <div class="nav-mb-sm" data-astro-cid-bpgok6sl>
Theme modified from
<a href="https://github.com/zutrinken/attila" target="_blank" data-astro-cid-bpgok6sl>Attila</a> </div> <div class="dot" data-astro-cid-bpgok6sl>・</div> <div class="nav-mb-sm" data-astro-cid-bpgok6sl>
Tech support by
<a href="https://my-attic-millieqiuuuu.vercel.app/" target="_blank" data-astro-cid-bpgok6sl>Millie</a> </div> </span> </nav> </div>   <meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"> </body></html>  